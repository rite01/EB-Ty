{"version":3,"sources":["../../../src/libs/logger/logger.services.ts"],"sourcesContent":["/* eslint-disable no-param-reassign */\n/* eslint-disable no-underscore-dangle */\nimport { Logger } from 'winston';\nimport { logger } from './logger';\n\ntype IContext =\n  | string\n  | {\n      controller?: string;\n      method?: string;\n      status?: number;\n      function?: string;\n    };\n\nexport class LoggerService {\n  private context?: IContext;\n\n  private _logger: Logger = logger;\n\n  public get logger(): Logger {\n    return this._logger;\n  }\n\n  public setContext(context: IContext): void {\n    this.context = context;\n  }\n\n  public info(message: any, context?: IContext): Logger {\n    context = context || this.context;\n\n    if (typeof message === 'object') {\n      const { message: msg, ...meta } = message;\n\n      return this._logger.info(msg as string, { context, ...meta });\n    }\n\n    return this._logger.info(message, { context });\n  }\n\n  public error(message: any, context?: IContext, trace?: string): Logger {\n    context = context || this.context;\n\n    if (message instanceof Error) {\n      const { message: msg, ...meta } = message;\n\n      return this._logger.error(msg, {\n        context,\n        stack: [trace || message.stack],\n        ...meta,\n      });\n    }\n\n    if (typeof message === 'object') {\n      const { message: msg, ...meta } = message;\n\n      return this._logger.error(msg as string, {\n        context,\n        stack: [trace],\n        ...meta,\n      });\n    }\n\n    return this._logger.error(message, { context, stack: [trace] });\n  }\n\n  public warn(message: any, context?: IContext): Logger {\n    context = context || this.context;\n\n    if (typeof message === 'object') {\n      const { message: msg, ...meta } = message;\n\n      return this._logger.warn(msg as string, { context, ...meta });\n    }\n\n    return this._logger.warn(message, { context });\n  }\n\n  public debug?(message: any, context?: IContext): Logger {\n    context = context || this.context;\n\n    if (typeof message === 'object') {\n      const { message: msg, ...meta } = message;\n\n      return this._logger.debug(msg as string, { context, ...meta });\n    }\n\n    return this._logger.debug(message, { context });\n  }\n\n  public verbose?(message: any, context?: IContext): Logger {\n    context = context || this.context;\n\n    if (typeof message === 'object') {\n      const { message: msg, ...meta } = message;\n\n      return this._logger.verbose(msg as string, { context, ...meta });\n    }\n\n    return this._logger.verbose(message, { context });\n  }\n}\n\nexport const loggerService = new LoggerService();\n"],"names":["LoggerService","loggerService","logger","_logger","setContext","context","info","message","msg","meta","error","trace","Error","stack","warn","debug","verbose"],"mappings":"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"}