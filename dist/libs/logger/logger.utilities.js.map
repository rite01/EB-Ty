{"version":3,"sources":["../../../src/libs/logger/logger.utilities.ts"],"sourcesContent":["/* eslint-disable no-unsafe-optional-chaining */\n/* eslint-disable no-underscore-dangle */\nimport { Format } from 'logform';\nimport { format } from 'winston';\n\nexport type ConsoleFormatOptions = {\n  colors?: boolean;\n  prettyPrint?: boolean;\n};\n\nconst clc = {\n  bold: (text: string) => `\\x1B[1m${text}\\x1B[0m`,\n  green: (text: string) => `\\x1B[32m${text}\\x1B[39m`,\n  yellow: (text: string) => `\\x1B[33m${text}\\x1B[39m`,\n  red: (text: string) => `\\x1B[31m${text}\\x1B[39m`,\n  magentaBright: (text: string) => `\\x1B[95m${text}\\x1B[39m`,\n  cyanBright: (text: string) => `\\x1B[96m${text}\\x1B[39m`,\n};\n\nconst nestLikeColorScheme: Record<string, (text: string) => string> = {\n  info: clc.green,\n  error: clc.red,\n  warn: clc.yellow,\n  debug: clc.magentaBright,\n  verbose: clc.cyanBright,\n};\n\nfunction getValidValues(context: any = null) {\n  if (!context) {\n    return {\n      isValidString: null,\n      context: '',\n    };\n  }\n  const isString: boolean = context === 'string';\n  if (isString) {\n    return {\n      isValidString: true,\n      context,\n    };\n  }\n  const code: string = context?.status ? `[${context?.status}] ` : '';\n  const method: string = context?.method ? `[${context?.method}] ` : '';\n  const _function: string = context?.function ? `[${context?.function}] ` : '';\n  const controller: string = context?.controller ? `[${context?.controller}] ` : '';\n  return {\n    isValidString: false,\n    code,\n    method,\n    _function,\n    controller,\n  };\n}\n\nconst getFormattedLogs = (appName = 'Node', data: any = null): string => {\n  const values = getValidValues(data.context);\n  if (data?.context && !values.isValidString) {\n    const {\n      code, controller, _function, method,\n    } = values;\n    return `[${appName}] [${data?.level.toUpperCase().padEnd(7).trim()}] - ${data?.timestamp} ${controller}${method}${code}${_function}${data?.message}`;\n  }\n  const context = data?.context ? `[${data?.context}]` : '';\n  return `[${appName}] [${data?.level.toUpperCase().padEnd(7).trim()}] - ${data?.timestamp}${context}${data?.message}`;\n};\n\nconst consoleFormat = (\n  appName = 'Node',\n  options: ConsoleFormatOptions = {\n    colors: !process.env.NO_COLOR,\n    prettyPrint: false,\n  },\n): Format => format.printf((args) => {\n  const {\n    context, level, message, ms,\n  } = args;\n  let { timestamp } = args;\n  if (timestamp && timestamp === new Date(timestamp).toISOString()) {\n    timestamp = new Date(timestamp).toLocaleString();\n  }\n\n  const color = (options.colors && nestLikeColorScheme[level]) || ((text: string): string => text);\n\n  const yellow = options.colors ? clc.yellow : (text: string): string => text;\n\n  const _appName: string = `${color(`[${appName}]`)} `;\n\n  const getContext = (): string => {\n    const truthyValues = getValidValues(context);\n    if (truthyValues?.isValidString === null) {\n      return '';\n    }\n\n    if (!truthyValues?.isValidString) {\n      const {\n        code, method, controller, _function,\n      } = truthyValues;\n      return `${clc.yellow(controller!)}${clc.green(code!)}${clc.green(method!)}${clc.green(_function!)} `;\n    }\n    return `${clc.yellow(truthyValues?.context)} `;\n  };\n\n  const _ms: string = ms ? ` ${yellow(ms)}` : '';\n  const _timestamp: string = timestamp ? `${timestamp} ` : '';\n  const _level = `${yellow(level?.charAt(0).toUpperCase() + level?.slice(1))}\\t`;\n\n  return `${_appName + _level.trimEnd()} ${clc.green('-')} ${_timestamp}${getContext()}${color(message)} - ${_ms}`;\n});\n\nexport const utilities = {\n  format: {\n    consoleFormat,\n    getFormattedLogs,\n  },\n};\n"],"names":["utilities","clc","bold","text","green","yellow","red","magentaBright","cyanBright","nestLikeColorScheme","info","error","warn","debug","verbose","getValidValues","context","isValidString","isString","code","status","method","_function","function","controller","getFormattedLogs","appName","data","values","level","toUpperCase","padEnd","trim","timestamp","message","consoleFormat","options","colors","process","env","NO_COLOR","prettyPrint","format","printf","args","ms","Date","toISOString","toLocaleString","color","_appName","getContext","truthyValues","_ms","_timestamp","_level","charAt","slice","trimEnd"],"mappings":"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"}