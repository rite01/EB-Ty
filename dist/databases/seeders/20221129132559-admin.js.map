{"version":3,"sources":["../../../src/databases/seeders/20221129132559-admin.js"],"sourcesContent":["const bcrypt = require('bcrypt');\n\nmodule.exports = {\n  up: async (queryInterface) => {\n    try {\n      const [_, admin] = await queryInterface.sequelize.query(\"SELECT id FROM public.roles WHERE name='admin'\");\n      if (admin.rowCount <= 0) {\n        throw new Error('admin not found!');\n      }\n\n      const [__, superAdminResult] = await queryInterface.sequelize.query(\"SELECT id FROM public.roles WHERE name='super_admin'\");\n      if (superAdminResult.rowCount <= 0) {\n        throw new Error('superAdminResult not found!');\n      }\n      const adminSalt = await bcrypt.genSalt();\n      const adminPassword = await bcrypt.hash('admin@12345', adminSalt);\n      const superAdminPassword = await bcrypt.hash('super_admin@12345', adminSalt);\n\n      queryInterface.bulkInsert('users', [\n        {\n          name: 'Admin',\n          uuid: '29f8fe4a-8cd1-41f4-aa04-5c400644a181',\n          email: 'admin@thoughtwin.com',\n          password: adminPassword,\n          created_at: new Date(),\n          updated_at: new Date(),\n          role_id: admin.rows[0].id,\n        },\n        {\n          name: 'SuperAdmin',\n          uuid: '29f8fe4a-8cd1-41f4-aa04-5c400644a181',\n          email: 'super_admin@thoughtwin.com',\n          password: superAdminPassword,\n          created_at: new Date(),\n          updated_at: new Date(),\n          role_id: superAdminResult.rows[0].id,\n        },\n      ]);\n    } catch (error) {\n      // eslint-disable-next-line no-unused-expressions\n      process.env.NODE_ENV !== 'production' && console.log({ error });\n    }\n  },\n  down: (queryInterface) => queryInterface.bulkDelete('users', null, {}),\n};\n"],"names":["bcrypt","require","module","exports","up","queryInterface","_","admin","sequelize","query","rowCount","Error","__","superAdminResult","adminSalt","genSalt","adminPassword","hash","superAdminPassword","bulkInsert","name","uuid","email","password","created_at","Date","updated_at","role_id","rows","id","error","process","env","NODE_ENV","console","log","down","bulkDelete"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAMA,SAASC,QAAQ;AAEvBC,OAAOC,OAAO,GAAG;IACfC,EAAE;mBAAE,kBAAA,UAAOC,gBAAmB;YAC5B,IAAI;gBACF,MAAM,CAACC,GAAGC,MAAM,GAAG,MAAMF,eAAeG,SAAS,CAACC,KAAK,CAAC;gBACxD,IAAIF,MAAMG,QAAQ,IAAI,GAAG;oBACvB,MAAM,IAAIC,MAAM,oBAAoB;gBACtC,CAAC;gBAED,MAAM,CAACC,IAAIC,iBAAiB,GAAG,MAAMR,eAAeG,SAAS,CAACC,KAAK,CAAC;gBACpE,IAAII,iBAAiBH,QAAQ,IAAI,GAAG;oBAClC,MAAM,IAAIC,MAAM,+BAA+B;gBACjD,CAAC;gBACD,MAAMG,YAAY,MAAMd,OAAOe,OAAO;gBACtC,MAAMC,gBAAgB,MAAMhB,OAAOiB,IAAI,CAAC,eAAeH;gBACvD,MAAMI,qBAAqB,MAAMlB,OAAOiB,IAAI,CAAC,qBAAqBH;gBAElET,eAAec,UAAU,CAAC,SAAS;oBACjC;wBACEC,MAAM;wBACNC,MAAM;wBACNC,OAAO;wBACPC,UAAUP;wBACVQ,YAAY,IAAIC;wBAChBC,YAAY,IAAID;wBAChBE,SAASpB,MAAMqB,IAAI,CAAC,EAAE,CAACC,EAAE;oBAC3B;oBACA;wBACET,MAAM;wBACNC,MAAM;wBACNC,OAAO;wBACPC,UAAUL;wBACVM,YAAY,IAAIC;wBAChBC,YAAY,IAAID;wBAChBE,SAASd,iBAAiBe,IAAI,CAAC,EAAE,CAACC,EAAE;oBACtC;iBACD;YACH,EAAE,OAAOC,OAAO;gBAEdC,QAAQC,GAAG,CAACC,QAAQ,KAAK,gBAAgBC,QAAQC,GAAG,CAAC;oBAAEL;gBAAM;YAC/D;QACF;wBAvCWzB;;;;IAwCX+B,MAAM,CAAC/B,iBAAmBA,eAAegC,UAAU,CAAC,SAAS,IAAI,EAAE,CAAC;AACtE"}